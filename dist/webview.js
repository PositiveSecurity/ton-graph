"use strict";(()=>{var e=1;mermaid.initialize({startOnLoad:!1,securityLevel:"strict",theme:"default",fontSize:14,flowchart:{nodeSpacing:15,rankSpacing:15,curve:"basis",useMaxWidth:!1,htmlLabels:!0}}),mermaid.render("mermaid-diagram-svg",document.getElementById("mermaid-diagram").textContent).then((function(e){const r=document.getElementById("mermaid-diagram").textContent;document.getElementById("mermaid-diagram").setAttribute("data-original-code",r),document.getElementById("mermaid-diagram").innerHTML=e.svg,n(),t("Diagram rendered successfully","success")})).catch((function(e){document.getElementById("errorContainer").textContent="Error rendering diagram: "+e,document.getElementById("errorContainer").style.display="block",t("Error rendering diagram: "+e,"error")}));acquireVsCodeApi();function t(e,t){var n=document.getElementById("logContainer"),r=document.createElement("div");r.className="log-entry log-"+t,r.textContent=e,n.appendChild(r),n.scrollTop=n.scrollHeight}function n(){var t=document.querySelector(".mermaid svg");t&&(r(t),document.getElementById("zoomInBtn").addEventListener("click",(function(){const t=e;e=Math.min(5,e+.05),o();const n=document.querySelector(".mermaid-container"),r=n.clientWidth/2,i=n.clientHeight/2,a=r+n.scrollLeft,l=i+n.scrollTop;n.scrollLeft=a*(e/t)-r,n.scrollTop=l*(e/t)-i})),document.getElementById("zoomOutBtn").addEventListener("click",(function(){const t=e;e=Math.max(.05,e-.1),o();const n=document.querySelector(".mermaid-container"),r=n.clientWidth/2,i=n.clientHeight/2,a=r+n.scrollLeft,l=i+n.scrollTop;n.scrollLeft=a*(e/t)-r,n.scrollTop=l*(e/t)-i})),document.getElementById("resetZoomBtn").addEventListener("click",i),document.getElementById("showCodeBtn").addEventListener("click",(function(){var e,t,n;e=document.getElementById("codeDisplay"),t=document.querySelector(".mermaid-container"),n=document.getElementById("mermaid-diagram").getAttribute("data-original-code")||"","block"===e.style.display?(e.style.display="none",t.style.display="block",document.getElementById("showCodeBtn").textContent="Show Code"):(e.textContent=n,e.style.display="block",t.style.display="none",document.getElementById("showCodeBtn").textContent="Show Diagram")})))}function r(e){e.style.imageRendering="optimizeQuality",e.style.shapeRendering="geometricPrecision",e.style.textRendering="geometricPrecision",e.style.webkitFontSmoothing="antialiased",e.style.mozOsxFontSmoothing="grayscale";e.querySelectorAll("text").forEach((function(e){e.style.fontKerning="normal",e.style.fontVariantLigatures="common-ligatures",e.style.fontFamily="'Arial', 'Helvetica', sans-serif",e.style.fontWeight="normal"}));e.querySelectorAll(".edgePath path").forEach((function(e){e.style.shapeRendering="geometricPrecision",e.style.strokeWidth="1.5px"}));e.querySelectorAll(".cluster rect").forEach((function(e){e.style.strokeWidth="1px",e.style.stroke="#999"}))}function o(){var t=document.querySelector(".mermaid svg");t&&(t.style.transform="scale("+e+")",t.style.transformOrigin="0 0",t.style.webkitFontSmoothing="antialiased",t.style.mozOsxFontSmoothing="grayscale",r(t))}function i(){e=1;var t=document.querySelector(".mermaid svg");t&&(t.style.transform="scale(1)");var n=document.querySelector(".mermaid-container");n.scrollLeft=0,n.scrollTop=0}window.addEventListener("message",(function(e){var r=e.data;switch(r.command){case"updateDiagram":const e=document.getElementById("mermaid-diagram");e.textContent=r.diagram,e.setAttribute("data-original-code",r.diagram);const o=14,i=15,a=15;mermaid.initialize({startOnLoad:!1,securityLevel:"strict",theme:"default",fontSize:o,maxTextSize:9e6,flowchart:{nodeSpacing:i,rankSpacing:a,curve:"basis",useMaxWidth:!1,htmlLabels:!0}}),mermaid.render("mermaid-diagram-svg",r.diagram).then((function(r){e.innerHTML=r.svg,n(),t("Diagram updated with filters","success")})).catch((function(e){document.getElementById("errorContainer").textContent="Error updating diagram: "+e,document.getElementById("errorContainer").style.display="block",t("Error updating diagram: "+e,"error")}));break;case"filterError":document.getElementById("errorContainer").textContent=r.error,document.getElementById("errorContainer").style.display="block",t("Filter error: "+r.error,"error")}}))})();
